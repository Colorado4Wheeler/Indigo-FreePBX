<?xml version="1.0"?>

<Devices>
	<Device type="sensor" id="Server">
		<Name>FreePBX Server</Name>
		<ConfigUI>
			<!-- *********** INDIGO HARD CODED DEVICE FEATURES *********** -->
			<Field id="SupportsOnState" type="checkbox" defaultValue="true" hidden="true">
				<Label>Show ON/OFF state:</Label>
			</Field>
			
			<Field id="SupportsSensorValue" type="checkbox" defaultValue="true" hidden="true" >
				<Label>Show sensor value state:</Label>
			</Field>
			
			<Field id="SupportsStatusRequest" type="checkbox" defaultValue="false" hidden="true">
				<Label>Enable status request / refresh button:</Label>
			</Field>
			
			<Field id="AllowOnStateChange" type="checkbox" defaultValue="false" hidden="true">
				<Label>Enable controls to override on/off state</Label>
			</Field>
			
			<Field id="AllowSensorValueChange" type="checkbox" hidden="true" defaultValue="false">
				<Label>Enable controls to override sensor value state</Label>
			</Field>
		
			<!-- *********** PLUGIN DEVICE FEATURES *********** -->
			<Field id="deviceone" type="menu" >
				<Label>Device 1:</Label>
				<List class="indigo.devices" />
			</Field>

			<Field id="ipaddress" type="textfield" defaultValue="192.168.1.1">
				<Label>Server IP address:</Label>
			</Field>
			
			<Field id="token" type="textfield" defaultValue="root">
				<Label>Server token:</Label>
			</Field>
			
			<Field id="key" type="textfield" defaultValue="">
				<Label>Token key:</Label>
			</Field>
		</ConfigUI>
		<States>
			<State id="onOffState">
				<ValueType boolType="OnOff">Boolean</ValueType>
				<TriggerLabel>Security state</TriggerLabel>
				<ControlPageLabel>Security state</ControlPageLabel>
			</State>
			
		</States>
		<UiDisplayStateId>onOffState</UiDisplayStateId>
	</Device>
	
	<Device type="sensor" id="Extension">
		<Name>FreePBX Extension</Name>
		<ConfigUI>
			<!-- *********** INDIGO HARD CODED DEVICE FEATURES *********** -->
			<Field id="SupportsOnState" type="checkbox" defaultValue="true" hidden="true">
				<Label>Show ON/OFF state:</Label>
			</Field>
			
			<Field id="SupportsSensorValue" type="checkbox" defaultValue="true" hidden="true" >
				<Label>Show sensor value state:</Label>
			</Field>
			
			<Field id="SupportsStatusRequest" type="checkbox" defaultValue="false" hidden="true">
				<Label>Enable status request / refresh button:</Label>
			</Field>
			
			<Field id="AllowOnStateChange" type="checkbox" defaultValue="false" hidden="true">
				<Label>Enable controls to override on/off state</Label>
			</Field>
			
			<Field id="AllowSensorValueChange" type="checkbox" hidden="true" defaultValue="false">
				<Label>Enable controls to override sensor value state</Label>
			</Field>
		
			<!-- *********** PLUGIN DEVICE FEATURES *********** -->
			<Field id="server" type="menu" >
				<Label>Server:</Label>
				<List class="indigo.devices" filter="com.eps.indigoplugin.freepbx.Server" />
			</Field>

			<Field id="extension" type="textfield" defaultValue="">
				<Label>Extension number:</Label>
			</Field>
			
		</ConfigUI>
		<States>
			<State id="dnd" defaultValue="disabled">
				<ValueType>
					<List>
						<Option value="enabled">Enabled</Option>
						<Option value="disabled">Disabled</Option>
					</List>
				</ValueType>
				<TriggerLabel>Do Not Disturb</TriggerLabel>
				<ControlPageLabel>Do Not Disturb</ControlPageLabel>
			</State>
			
			<State id="cfunconditional" defaultValue="disabled">
				<ValueType>
					<List>
						<Option value="enabled">Enabled</Option>
						<Option value="disabled">Disabled</Option>
					</List>
				</ValueType>
				<TriggerLabel>Unconditional Call Forwarding</TriggerLabel>
				<ControlPageLabel>Unconditional Call Forwarding</ControlPageLabel>
			</State>
			
			<State id="cfunconditionalNumber">
				<ValueType>String</ValueType>
				<TriggerLabel>Unconditional Forward Number</TriggerLabel>
				<ControlPageLabel>Unconditional Forward Number</ControlPageLabel>
			</State>
			
			<State id="cfunavailable" defaultValue="disabled">
				<ValueType>
					<List>
						<Option value="enabled">Enabled</Option>
						<Option value="disabled">Disabled</Option>
					</List>
				</ValueType>
				<TriggerLabel>Unavailable Call Forwarding</TriggerLabel>
				<ControlPageLabel>Unavailable Call Forwarding</ControlPageLabel>
			</State>
			
			<State id="cfunavailableNumber">
				<ValueType>String</ValueType>
				<TriggerLabel>Unavailable Forward Number</TriggerLabel>
				<ControlPageLabel>Unavailable Forward Number</ControlPageLabel>
			</State>
			
			<State id="cfbusy" defaultValue="disabled">
				<ValueType>
					<List>
						<Option value="enabled">Enabled</Option>
						<Option value="disabled">Disabled</Option>
					</List>
				</ValueType>
				<TriggerLabel>Busy Call Forwarding</TriggerLabel>
				<ControlPageLabel>Busy Call Forwarding</ControlPageLabel>
			</State>
			
			<State id="cfbusyNumber">
				<ValueType>String</ValueType>
				<TriggerLabel>Busy Forward Number</TriggerLabel>
				<ControlPageLabel>Busy Forward Number</ControlPageLabel>
			</State>
			
			<State id="onOffState">
				<ValueType boolType="OnOff">Boolean</ValueType>
				<TriggerLabel>Security state</TriggerLabel>
				<ControlPageLabel>Security state</ControlPageLabel>
			</State>
			
		</States>
		<UiDisplayStateId>onOffState</UiDisplayStateId>
	</Device>	
</Devices>
